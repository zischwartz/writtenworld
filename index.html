<!DOCTYPE html>
<html>
<head>
	<title>Leaflet debug page</title>

	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	
	<link rel="stylesheet" href="css/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="../../dist/leaflet.ie.css" /><![endif]-->
	<link rel="stylesheet" href="css/mobile.css" />
	<link rel="stylesheet" href="css/world-style.css" />
  
  <script src="js/libs/jquery-1.7.js"></script>
	<script src="js/leaflet-src.js"></script>
	<script src="js/layer.js"></script>
	<script src="js/world.js"></script>
</head>
<body>

	<div id="map"></div>

	<script type="text/javascript">
// 
// 		var cloudmadeUrl = 'http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png';
// 			// cloudmadeAttribution = 'Map data &copy; 2011 OpenStreetMap contributors, Imagery &copy; 2011 CloudMade',
// 		var cloudmade = new L.TileLayer(cloudmadeUrl, {maxZoom: 18});
// 	
// 		var map = new L.Map('map', {center: new L.LatLng(51.505, -0.09), zoom: 17}).addLayer(cloudmade);
// 		

// 
// 		map.on('locationfound', function(e) {
// 			var marker = new L.Marker(e.latlng);
// 			map.addLayer(marker);
// 			
// 			marker.bindPopup("<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec odio. Quisque volutpat mattis eros. Nullam malesuada erat ut turpis. Suspendisse urna nibh, viverra non, semper suscipit, posuere a, pede.</p><p>Donec nec justo eget felis facilisis fermentum. Aliquam porttitor mauris sit amet orci. Aenean dignissim pellentesque felis.</p>");
// 		});
// 		
// 		map.on('locationerror', function(e) {
// 			console.log(e.message);
// 			// map.fitWorld();
// 		});
		
		// map.locateAndSetView();




// 
// L.TileLayer.Dom = L.TileLayer.extend({
// 	options: {
// 		async: false
// 	},
// 
// 	initialize: function (options) {
// 		L.Util.setOptions(this, options);
// 	},
// 
// 	redraw: function () {
// 		for (var i in this._tiles) {
// 			var tile = this._tiles[i];
// 			this._redrawTile(tile);
// 		}
// 	},
// 
// 	_redrawTile: function (tile) {
// 		this.drawTile(tile, tile._tilePoint, tile._zoom);
// 	},
// 
// 	_createTileProto: function () {
// 		console.log('creatingTileProto');
// 		// this._canvasProto = L.DomUtil.create('canvas', 'leaflet-tile');
// 		this._divProto = L.DomUtil.create('div', 'leaflet-tile');
// 
// 		var tileSize = this.options.tileSize;
// 		
// 		this._divProto.style.width = tileSize + 'px';
// 		this._divProto.style.height = tileSize + 'px';
// 		this._docFragment = document.createDocumentFragment();
// 		// var fragment = document.createDocumentFragment()
//  			   for(i=0; i<10; i++)
//  			   {
//  			 	var cell=this._docFragment.appendChild(document.createElement("span"));
//  			 	// var cell=fragment.appendChild(document.createElement("span"));
//  			   	cell.innerHTML = 'A';
//  			   }
//  		// this._divProto.appendChild(fragment);
// 
// 	},
// 
// 	_createTile: function () {
// 		// var tile = this._divProto.cloneNode(true);
// 
// 		//alternatively
// 		var tile = this._divProto.cloneNode(true);
// 		tile.appendChild(this._docFragment.cloneNode(true));
// 
// 
// 		tile.onselectstart = tile.onmousemove = L.Util.falseFn;
// 		return tile;
// 	},
// 
// 	_loadTile: function (tile, tilePoint, zoom) {
// 		console.log('_loadTile called');
// 		tile._layer = this;
// 		tile._tilePoint = tilePoint;
// 		tile._zoom = zoom;
// 
// 		this.drawTile(tile, tilePoint, zoom);
// 
// 		if (!this.options.async) {
// 			this.tileDrawn(tile);
// 		}
// 	},
// 
// 	drawTile: function (tile, tilePoint, zoom) {
// 		// override with rendering code
// 	},
// 	
// 	_getTile: function () {
// 		// console.log('_getTile called');
// 		// console.log('current zoom in _getTile', map.getZoom());
// 		if (this.options.reuseTiles && this._unusedTiles.length > 0) {
// 			var tile = this._unusedTiles.pop();
// 			this._resetTile(tile);
// 			return tile;
// 		}
// 		return this._createTile();
// 	},
// 
// 	tileDrawn: function (tile) {
// 		console.log('tileDrawn called')
// 		this._tileOnLoad.call(tile);
// 	},
// 
// 	_tileOnLoad: function (e) {
// 		console.log('_tileOnLoad called')
// 		var layer = this._layer;
// 
// 		// this.appendChild(layer._docFragment.cloneNode(true));
// 
// 		this.className += ' leaflet-tile-loaded';
// 
// 		layer.fire('tileload', {tile: this, url: this.src});
// 
// 		layer._tilesToLoad--;
// 		if (!layer._tilesToLoad) {
// 			layer.fire('load');
// 		}
// 	},
// 
// 
// 
// 
// });
// 
// and the actual code..

		// var domTiles = new L.TileLayer.Dom();

		// domTiles.drawTile = function(tile, tilePoint, zoom) {
 			   // var ctx = canvas.getContext('2d');
 			   // console.log(tilePoint, zoom);
 			   // console.log(tile);
 			   // tile.innerHTML= zoom;
 			  //  var fragment = document.createDocumentFragment();
 			  //  for(i=0; i<512; i++)
 			  //  {
 			 	// var cell=fragment.appendChild(document.createElement("span"));
 			  //  	cell.innerHTML = 'A';
 			  //  }
 			   // tile.appendChild(fragment.cloneNode(true));
    	// draw something on the tile canvas
		// }

		// map.addLayer(domTiles);

	</script>
</body>
</html>
